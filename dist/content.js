console.log("âœ… Content Script Loaded!"),chrome.runtime.onMessage.addListener((t,e,a)=>{if("getPageData"===t.action){const t=/"captionTracks":(\[.*?\])/,e=document.body.innerHTML.match(t);if(!e)return a({status:"error",message:"No captions found for this video."}),!0;try{const t=JSON.parse(e[1]);(async function(t){const e=await fetch(t),a=await e.text(),n=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("text");let s="";for(let t=0;t<n.length;t++)s+=n[t].textContent+" ";return s.trim()})((t.find(t=>"en"===t.languageCode)||t[0]).baseUrl).then(t=>{a({status:"success",title:document.title,transcript:t})})}catch(t){a({status:"error",message:"Failed to parse captions: "+t.message})}return!0}});