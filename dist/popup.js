document.getElementById("testBtn").addEventListener("click",async()=>{const e=document.getElementById("debugOutput"),t=document.getElementById("inputBox");e.innerText="ðŸ•µï¸ step 1: Finding Transcript URL...";let[n]=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(n.id,{action:"getPageData"},n=>{n&&"error"!==n.status?(e.innerText="â¬‡ï¸ Step 2: Downloading text...",chrome.runtime.sendMessage({action:"fetchTranscript",url:n.transcriptUrl},n=>{"success"===n.status?(e.innerText=`âœ… Success! Got ${n.transcript.length} chars.`,t.value=n.transcript):e.innerText="âŒ Download failed: "+n.message})):e.innerText="âŒ Could not find caption URL."})}),document.getElementById("summarizeBtn").addEventListener("click",()=>{const e=document.getElementById("inputBox").value,t=document.getElementById("output");e?(t.innerText="â³ AI is thinking... (First run takes ~30s)",chrome.runtime.sendMessage({action:"summarize",text:e},e=>{chrome.runtime.lastError?t.innerText="Error: "+chrome.runtime.lastError.message:"success"===e.status?t.innerText=e.summary:t.innerText="Error: "+e.message})):t.innerText="Please paste some text first!"});